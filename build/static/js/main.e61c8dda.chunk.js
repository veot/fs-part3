(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(15),o=t.n(c),u=t(3),a=t(4),i=t.n(a),s="/api/persons",b=function(){return i.a.get(s).then((function(e){return e.data}))},j=function(e){return i.a.post(s,e).then((function(e){return e.data}))},d=function(e,n){return i.a.put("".concat(s,"/").concat(e),n).then((function(e){return e.data}))},l=function(e){return i.a.delete("".concat(s,"/").concat(e)).then((function(e){return e.data}))},f=t(0),h=function(e){var n=e.state,t=e.onChange;return Object(f.jsxs)("div",{children:["filter names with ",Object(f.jsx)("input",{value:n,onChange:t})]})},m=function(e){return Object(f.jsxs)("form",{onSubmit:e.onSubmit,children:[Object(f.jsxs)("div",{children:["name: ",Object(f.jsx)("input",{value:e.nameState,onChange:e.onNameChange})]}),Object(f.jsxs)("div",{children:["number:"," ",Object(f.jsx)("input",{type:"tel",value:e.numberState,onChange:e.onNumberChange})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})},O=function(e){var n=e.person,t=e.onRemove;return Object(f.jsxs)("li",{children:[n.name," ",n.number," ",Object(f.jsx)("button",{onClick:t,children:"remove"})]})},p=function(e){var n=e.allPersons,t=e.nameFilter,r=e.handleRemove,c=t?n.filter((function(e){return e.name.toLowerCase().startsWith(t.toLowerCase())})):n;return Object(f.jsx)("ul",{children:c.map((function(e){return Object(f.jsx)(O,{person:e,onRemove:function(){return r(e.id)}},e.id)}))})},v=t(6),x={background:"lightgrey",fontSize:20,color:"green",padding:10,borderStyle:"solid",borderRadius:5,marginBottom:10},g=Object(v.a)(Object(v.a)({},x),{},{color:"red"}),S=function(e){var n=e.message,t=e.type;if(null===n)return null;var r="error"===t?g:x;return Object(f.jsx)("div",{style:r,children:n})},w=function(){var e=Object(r.useState)([]),n=Object(u.a)(e,2),t=n[0],c=n[1],o=Object(r.useState)(""),a=Object(u.a)(o,2),i=a[0],s=a[1],O=Object(r.useState)(""),v=Object(u.a)(O,2),x=v[0],g=v[1],w=Object(r.useState)(""),C=Object(u.a)(w,2),y=C[0],k=C[1],R=Object(r.useState)(null),N=Object(u.a)(R,2),P=N[0],B=N[1],E=Object(r.useState)(null),F=Object(u.a)(E,2),J=F[0],L=F[1];Object(r.useEffect)((function(){return b().then((function(e){return c(e)}))}),[]);return Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Phonebook"}),Object(f.jsx)(S,{message:P,type:"success"}),Object(f.jsx)(S,{message:J,type:"error"}),Object(f.jsx)(h,{state:y,onChange:function(e){return k(e.target.value)}}),Object(f.jsx)("h2",{children:"Add new contact"}),Object(f.jsx)(m,{onSubmit:function(e){if(e.preventDefault(),""!==i){var n=t.find((function(e){return e.name===i}));if(n){if(!window.confirm("".concat(i," is already in phonebook, replace old number with new?")))return;d(n.id,{name:i,number:x}).then((function(e){c(t.map((function(n){return n.id!==e.id?n:e}))),B("Updated ".concat(i)),s(""),g("")})).catch((function(e){L(e.response.data.error)}))}else j({name:i,number:x}).then((function(e){c(t.concat(e))})).catch((function(e){L(e.response.data.error)}));setTimeout((function(){return B(null)}),3e3),setTimeout((function(){return L(null)}),5e3)}},onNameChange:function(e){return s(e.target.value)},onNumberChange:function(e){return g(e.target.value)},nameState:i,numberState:x}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(p,{allPersons:t,nameFilter:y,handleRemove:function(e){var n=t.find((function(n){return n.id===e}));window.confirm("Remove ".concat(n.name," ?"))&&l(e).then((function(){return c(t.filter((function(e){return e.id!==n.id})))}))}})]})};o.a.render(Object(f.jsx)(w,{}),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.e61c8dda.chunk.js.map